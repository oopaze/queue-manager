version: "3.7"

services:
  server:
    container_name: "server"
    build:
      dockerfile: ./devops/Dockerfile
      context: .

    command: ["python", "./runserver.py"]
    ports:
      - "50001:50000"

  ts:
    container_name: "TS"
    build:
      dockerfile: ./devops/Dockerfile
      context: .

    command: ["python", "./devops/example_ts.py"]
    depends_on:
      - server 

  ta:
    container_name: "TA"
    build:
      dockerfile: ./devops/Dockerfile
      context: .

    command: ["python", "./devops/example_ta.py"]
    depends_on:
      - server 

  tv1:
    container_name: "TV1"
    build:
      dockerfile: ./devops/Dockerfile
      context: .

    command: ["python", "./devops/example_tv.py"]
    depends_on:
      - server 
    environment:
      - id=1

  tv2:
    container_name: "TV2"
    build:
      dockerfile: ./devops/Dockerfile
      context: .

    command: ["python", "./devops/example_tv.py"]
    depends_on:
      - server 
    environment:
      - id=2

  tv3:
    container_name: "TV3"
    build:
      dockerfile: ./devops/Dockerfile
      context: .

    command: ["python", "./devops/example_tv.py"]
    depends_on:
      - server 
    environment:
      - id=3
